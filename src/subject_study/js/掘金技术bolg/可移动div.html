<!--
 * @Date: 2020-08-24 09:40:25
 * @LastEditors: PoloHuang
 * @LastEditTime: 2020-09-03 18:27:03
-->

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title></title>
</head>

<body style="width: 100%; height: 300px">
    <div id="moveBox"></div>
</body>

</html>
<style>
    #moveBox{
        background-color: #000;
        width: 100px;
        height: 100px;
        position: absolute;
    }
</style>
<script>
    let dragging = false
    let position = null
    let moveBox = document.getElementById('moveBox')

    moveBox.addEventListener('mousedown', function(e) {
        dragging = true
        position = [e.clientX, e.clientY]  // 鼠标点击是的坐标
    })

    moveBox.addEventListener('mousemove', function(e) {
        if (!dragging) return
        const x = e.clientX     // 鼠标移动的坐标
        const y = e.clientY

        const deltaX = x - position[0]      // 鼠标对于点击时移动了多少
        const deltaY = y - position[1]

        const left = parseInt(moveBox.style.left || 0)
        const top = parseInt(moveBox.style.top || 0)

        moveBox.style.left = deltaX + left + 'px'   // 本身的坐标 + 移动了的距离
        moveBox.style.top = deltaY + top + 'px'

        position = [x, y]           // 将此时鼠标的坐标记录
    })

    moveBox.addEventListener('mouseup', function(e) {
        dragging = false
    })
</script>